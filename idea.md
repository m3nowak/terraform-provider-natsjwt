The purpose of this project is to create a terrafor provider aiding in management of JWT credentials in NATS.

It should be a good replacement for nsc command line utility.

# Requirements - features:

- good DX
- resource and data objext should follow nats jwt and nats nsc logic as close as possible
- nats jwt config should be stored as data object definitions
- control over jetstream limits and jetstream being enabled
- data objects should verify if correct type of seed was used as input
- produce a readme with simple documentation and usage examples
- it should be possible to use nkeys generated by resources as well as nkeys from external resources (like secret manager)

# Requirements - technical:

- golang project using terraform plugin framework
- dependency on https://github.com/nats-io/nkeys
- dependency on https://github.com/nats-io/jwt
- only secrets - nkeys can be stored in state
- tests
- "integration tests" using terraform and created structures
- support NATS version 2.11 and 2.12
- support newest stable terraform plugin framework

# Non-goals

- Account expiry handling

# Planned resources:

## nkey

name: nkey

inputs:

- keepers: map(string) - follow logic from https://registry.terraform.io/providers/hashicorp/random/latest/docs/resources/password
- type: string (operator, account, user)

output:

- seed: string (secret)
- public_key: string

# Planned data sources:

## operator

Data object representing nsc operator.

input:

- seed: string (secret)
- all of the configuration options avaliable in `nsc add operator` and `nsc edit operator`, use nsc-like defaults

output:

- seed: string (secret)
- public_key: string
- jwt: string

## account

Data object representing nsc account.

input:

- seed: string (secret)
- operator_seed: string (secret)
- all of the configuration options avaliable in `nsc add account` and `nsc edit account`, use nsc-like defaults

output:

- seed: string (secret)
- public_key: string
- jwt: string

## system account

Data object representing nsc account. Should have all defaults that are used when account is created with operator as system account

input:

- seed: string (secret)
- operator_seed: string (secret)
- all of the configuration options avaliable in `nsc add account` and `nsc edit account`

output:

- seed: string (secret)
- public_key: string
- jwt: string

## user

Data object representing nsc user.

input:

- seed: string (secret)
- account_seed: string (secret)
- all of the configuration options avaliable in `nsc add user` and `nsc edit user`, use nsc-like defaults

output:

- seed: string (secret)
- public_key: string
- jwt: string

## config-helper

Used to generate server config, similiar to `nsc generate config --mem-resolver`. Should output config in 2 forms; as complete config snippet for server or devided into: operator, system account, resolver and resolver_preload sections

input:

- operator_jwt: string
- account_jwts: list(string)
- system_account_jwt: string
- resolver_type: string (MEMORY) - only support memory resolvers for now

output:

- server_config: string
- operator: string
- system_account: string
- resolver: string
- resolver_preload: map(string)
